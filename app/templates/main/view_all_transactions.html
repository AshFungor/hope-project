{% extends 'main/base.html' %}

{% block title %} История транзакций {% endblock %}

{% block content %}

<div class="text-wrap text-center mb-4">
    <p class="mb-1"><strong> Транзакции, выполненные вами </strong></p>
</div>

<div class="card" style="width: 100%">
    <table class="table table-striped">
        <thead>
          <th scope="col"> номер транзакции </th>
          <th scope="col"> товар </th>
          <th scope="col"> количество </th>
          <th scope="col"> цена </th>
          <th scope="col"> статус </th>
          <th scope="col"> время </th>
          <th scope="col"> сторона сделки </th>
        </thead>
        <tbody>
            {% for transaction in transactions %}
                {% if transaction.status == 'approved' %}
                    <tr class="table-success">
                {% elif transaction.status == 'rejected' %}
                    <tr class="table-danger">
                {% else %}
                    <tr>    
                {% endif %}
                    <td> {{ transaction.transaction_id }} </td>
                    <td> {{ transaction.product }} </td>
                    {% if transaction.is_money %}
                      <td colspan="2"> {{ transaction.count }} </td>
                    {% else %}
                      <td> {{ transaction.count }} </td>
                      <td> {{ transaction.amount }} </td>
                    {% endif %}
                    <td> {{ transaction.status }} </td>
                    <td> {{ transaction.updated_at }} </td>
                    <td> {{ transaction.side }} </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<p></p>
<nav aria-label="Page navigation">
    <ul class="pagination">
      <li class="page-item">
        <a class="page-link" href="{{ url_for('proposal.view_history', offset=prev_offset, length=prev_length) }}" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
          <span class="sr-only">Previous</span>
        </a>
      </li>
      {% for page in pages %}
      <li class="page-item"><a class="page-link" href="{{ url_for('proposal.view_history', offset=page.offset, length=page.length) }}"> {{ page.num }} </a></li>
      {% endfor %}
      <li class="page-item">
        <a class="page-link" href="{{ url_for('proposal.view_history', offset=next_offset, length=next_length) }}" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
          <span class="sr-only">Next</span>
        </a>
      </li>
    </ul>
  </nav>

{% endblock %}